apiVersion: k3d.io/v1alpha5
kind: Simple
metadata:
  name: my-cluster     # T√™n c·ª•m (cluster name)

servers: 1             # S·ªë l∆∞·ª£ng server node (control plane)
agents: 2              # S·ªë l∆∞·ª£ng agent node (worker)


# ‚öôÔ∏è ƒê·ªãnh nghƒ©a API server (kube-apiserver endpoint)
kubeAPI:
  host: "vps.blockchain.local"   # domain s·∫Ω xu·∫•t hi·ªán trong kubeconfig
  hostIP: "0.0.0.0"            # IP m√°y th·∫≠t ho·∫∑c VPS (c√≥ th·ªÉ ƒë·ªïi)
  hostPort: "6443"               # port cho Kubernetes API


# üß© Host aliases n·ªôi b·ªô cho cluster
hostAliases:
  - ip: 127.0.0.1
    hostnames:
      - vps.blockchain.local

# C·∫•u h√¨nh c·ªïng cho c√°c service (v√≠ d·ª• ƒë·ªÉ expose port 80 v√† 443 ra ngo√†i)
ports:
  - port: 80:80        # host:container
    nodeFilters:
      - loadbalancer
  - port: 443:443
    nodeFilters:
      - loadbalancer

# Thi·∫øt l·∫≠p network (t√πy ch·ªçn)
network: k3d-net

# T·ª± ƒë·ªông t·∫°o load balancer
options:
  k3s:
    extraArgs:
      - arg: "--disable=traefik"
        nodeFilters:
          - server:0

