# User-ops-indexer configuration
userOpsIndexer:
  image:
    repository: ghcr.io
    name: blockscout/user-ops-indexer
    tag: latest
    pullPolicy: Always
  replicaCount: 1
  service:
    type: ClusterIP
    httpPort: 8050
    httpTargetPort: 8050
    grpcPort: 8051
    grpcTargetPort: 8051
    metricsPort: 6060
    metricsTargetPort: 6060
  resources:
    limits:
      memory: "512Mi"
      cpu: "500m"
    requests:
      memory: "256Mi"
      cpu: "200m"
  env:
    USER_OPS_INDEXER__SERVER__HTTP__ENABLED: "true"
    USER_OPS_INDEXER__SERVER__HTTP__ADDR: "0.0.0.0:8050"
    USER_OPS_INDEXER__SERVER__HTTP__MAX_BODY_SIZE: "2097152"
    USER_OPS_INDEXER__SERVER__GRPC__ENABLED: "false"
    USER_OPS_INDEXER__SERVER__GRPC__ADDR: "0.0.0.0:8051"
    USER_OPS_INDEXER__API__MAX_PAGE_SIZE: "100"
    USER_OPS_INDEXER__INDEXER__CONCURRENCY: "20"
    USER_OPS_INDEXER__INDEXER__ENTRYPOINTS__V06: "true"
    USER_OPS_INDEXER__INDEXER__ENTRYPOINTS__V07: "true"
    USER_OPS_INDEXER__INDEXER__REALTIME__ENABLED: "true"
    USER_OPS_INDEXER__INDEXER__PAST_RPC_LOGS_INDEXER__ENABLED: "true"
    USER_OPS_INDEXER__INDEXER__PAST_RPC_LOGS_INDEXER__BLOCK_RANGE: "1000"
    USER_OPS_INDEXER__INDEXER__PAST_DB_LOGS_INDEXER__ENABLED: "true"
    USER_OPS_INDEXER__INDEXER__PAST_DB_LOGS_INDEXER__START_BLOCK: "-100000"
    USER_OPS_INDEXER__INDEXER__PAST_DB_LOGS_INDEXER__END_BLOCK: "0"
    USER_OPS_INDEXER__DATABASE__CREATE_DATABASE: "false"
    USER_OPS_INDEXER__DATABASE__RUN_MIGRATIONS: "false"
    USER_OPS_INDEXER__METRICS__ENABLED: "true"
    USER_OPS_INDEXER__METRICS__ADDR: "0.0.0.0:6060"
    USER_OPS_INDEXER__METRICS__ROUTE: "/metrics"
    USER_OPS_INDEXER__JAEGER__ENABLED: "false"
    USER_OPS_INDEXER__JAEGER__AGENT_ENDPOINT: "localhost:6831"
    USER_OPS_INDEXER__TRACING__ENABLED: "true"
    USER_OPS_INDEXER__TRACING__FORMAT: "default"
    # Required - must be set
    # USER_OPS_INDEXER__INDEXER__RPC_URL: ""
    # USER_OPS_INDEXER__DATABASE__CONNECT__URL: ""
  livenessProbe:
    path: /health
    params:
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
  readinessProbe:
    path: /health
    params:
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  ingress:
    enabled: false
    className: nginx
    annotations: 
      nginx.ingress.kubernetes.io/use-regex: "true"
      nginx.ingress.kubernetes.io/rewrite-target: /$2
      nginx.ingress.kubernetes.io/ssl-redirect: "false"
    hostname: explorer.blockchain.local
    paths:
      - path: /user-ops-indexer(/|$)(.*)
        pathType: ImplementationSpecific
    tls:
      enabled: false

